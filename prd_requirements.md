# Project Structure

This document explains the organization and purpose of each file in the Zoho Projects MCP Server.

## Directory Structure

```
zoho-projects-mcp-server/
├── src/
│   └── index.ts                 # Main server implementation
├── dist/                         # Compiled JavaScript (generated by build)
│   └── index.js
├── node_modules/                 # Dependencies (generated by npm install)
├── .env                          # Environment configuration (create from .env.example)
├── .env.example                  # Environment configuration template
├── .gitignore                    # Git ignore rules
├── package.json                  # Node.js project configuration
├── tsconfig.json                 # TypeScript configuration
├── test-connection.js            # Connection test utility
├── setup.sh                      # Quick setup script
├── README.md                     # Main documentation
├── QUICKSTART.md                 # Quick start guide
├── OAUTH_SETUP.md                # OAuth setup guide
└── PROJECT_STRUCTURE.md          # This file
```

## Core Files

### `src/index.ts`
**Purpose**: Main MCP server implementation

**Key Components**:
- `ZohoProjectsServer` class - Main server class
- Tool definitions - All available MCP tools
- API request handling - HTTP communication with Zoho
- Error handling - Proper error responses

**What it does**:
- Connects to Claude via MCP protocol
- Authenticates with Zoho Projects API
- Exposes tools for project management
- Handles all API requests and responses

### `package.json`
**Purpose**: Node.js project configuration

**Contains**:
- Project metadata (name, version, description)
- Dependencies (@modelcontextprotocol/sdk, dotenv)
- Build scripts (build, dev, start, test)
- Entry points (main, bin)

**npm Scripts**:
- `npm run build` - Compile TypeScript to JavaScript
- `npm run dev` - Watch mode for development
- `npm start` - Run the compiled server
- `npm test` - Run connection tests
- `npm run setup` - Run setup script

### `tsconfig.json`
**Purpose**: TypeScript compiler configuration

**Settings**:
- Target: ES2022
- Module: Node16
- Output directory: ./dist
- Source directory: ./src
- Strict type checking enabled

## Configuration Files

### `.env.example`
**Purpose**: Template for environment variables

**Variables**:
- `ZOHO_ACCESS_TOKEN` - OAuth access token
- `ZOHO_PORTAL_ID` - Your portal ID
- `ZOHO_API_DOMAIN` - API domain (region-specific)

**Usage**:
```bash
cp .env.example .env
# Edit .env with your credentials
```

### `.env`
**Purpose**: Actual environment variables (not committed to git)

**Security**: 
- Never commit this file
- Store sensitive credentials here
- Listed in .gitignore

### `.gitignore`
**Purpose**: Specify files Git should ignore

**Ignores**:
- node_modules/
- dist/
- .env (and variants)
- IDE files
- Build artifacts
- Logs and temporary files

## Documentation Files

### `README.md`
**Purpose**: Main project documentation

**Sections**:
- Features overview
- Prerequisites
- Setup instructions
- Usage examples
- API reference
- Troubleshooting
- Configuration details

**For**: Users who want comprehensive documentation

### `QUICKSTART.md`
**Purpose**: Get up and running quickly

**Sections**:
- 5-minute setup guide
- Essential steps only
- Common issues
- Basic testing

**For**: Users who want to start immediately

### `OAUTH_SETUP.md`
**Purpose**: Detailed OAuth authentication guide

**Sections**:
- OAuth flow explanation
- Step-by-step token generation
- Multi-region support
- Token refresh process
- Security best practices

**For**: Users setting up OAuth for the first time

### `PROJECT_STRUCTURE.md`
**Purpose**: This file - explains project organization

## Utility Files

### `test-connection.js`
**Purpose**: Test Zoho API connectivity

**Features**:
- Validates environment variables
- Tests API authentication
- Lists portals and projects
- Color-coded terminal output
- Helpful error messages

**Usage**:
```bash
npm test
# or
node test-connection.js
```

### `setup.sh`
**Purpose**: Automated setup script

**Does**:
- Checks Node.js version
- Creates project structure
- Installs dependencies
- Builds the project
- Creates .env from template
- Shows Claude Desktop config

**Usage**:
```bash
chmod +x setup.sh
./setup.sh
```

## Generated Directories

### `dist/`
**Purpose**: Compiled JavaScript output

**Contains**:
- Transpiled .js files
- Source maps (.js.map)
- Type declarations (.d.ts)

**Generated by**: `npm run build`

**Used for**: Running the actual server

### `node_modules/`
**Purpose**: Installed npm packages

**Contains**:
- @modelcontextprotocol/sdk
- dotenv
- TypeScript
- Other dependencies

**Generated by**: `npm install`

## File Flow

### Development Flow
```
1. Edit src/index.ts
2. npm run build (or npm run dev for watch mode)
3. dist/index.js is generated
4. npm start runs dist/index.js
```

### Setup Flow
```
1. Clone/download project
2. ./setup.sh (or manual setup)
3. Edit .env with credentials
4. npm run build
5. Configure Claude Desktop
6. npm test (verify connection)
7. Restart Claude Desktop
```

### OAuth Flow
```
1. Register app in Zoho Developer Console
2. Generate authorization code
3. Exchange for access/refresh tokens
4. Add to .env
5. Test with npm test
```

## Important Notes

### Do NOT Commit
- `.env` - Contains secrets
- `dist/` - Generated files
- `node_modules/` - Dependencies
- Any files with tokens/credentials

### Do Commit
- `src/` - Source code
- `.env.example` - Template only
- `package.json` - Project config
- `tsconfig.json` - TS config
- Documentation files
- `test-connection.js`
- `setup.sh`

### Must Have for Running
- Compiled `dist/index.js` file
- Valid `.env` with credentials
- Claude Desktop configured
- Dependencies installed

## Customization

### Adding New Tools
1. Add tool definition in `ListToolsRequestSchema` handler
2. Add case in `CallToolRequestSchema` handler
3. Implement the method (e.g., `private async newMethod()`)
4. Rebuild with `npm run build`

### Changing API Endpoints
1. Update methods in `ZohoProjectsServer` class
2. Follow existing pattern for API calls
3. Use `this.makeRequest()` helper
4. Rebuild

### Adding New Dependencies
```bash
npm install <package-name>
# or for dev dependencies
npm install -D <package-name>
```

Then import in `src/index.ts`:
```typescript
import { Something } from 'package-name';
```

## Troubleshooting Files

### Check First
1. `.env` - Verify credentials
2. `package.json` - Check dependencies
3. `dist/index.js` - Ensure it exists and is recent

### Logs Location
- Build errors: Terminal output
- Runtime errors: Claude Desktop logs
- Test output: `npm test` terminal

### Rebuild After Changes
```bash
# Always rebuild after editing TypeScript
npm run build

# Or use watch mode during development
npm run dev
```

## Summary

| File | Type | Purpose | Edit? |
|------|------|---------|-------|
| src/index.ts | Source | Main server code | Yes |
| package.json | Config | Project metadata | Yes |
| tsconfig.json | Config | TypeScript settings | Rarely |
| .env | Config | Secrets/credentials | Yes |
| .env.example | Template | Credential template | No |
| README.md | Docs | Main documentation | Yes |
| test-connection.js | Utility | Connection testing | Rarely |
| setup.sh | Utility | Setup automation | Rarely |
| dist/ | Generated | Compiled code | No |
| node_modules/ | Generated | Dependencies | No |

**Key Principle**: Edit source files (`src/`), build to generate (`dist/`), configure with (`.env`), run with (`npm start`).